const Ae=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=t(i);fetch(i.href,o)}};Ae();var Oe="/panzoom-canvas-demo/assets/bg.2a8ecdad.png";/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var V=function(e,r){return V=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},V(e,r)};function te(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");V(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}function Pe(e,r,t,n){function i(o){return o instanceof t?o:new t(function(c){c(o)})}return new(t||(t=Promise))(function(o,c){function s(f){try{u(n.next(f))}catch(b){c(b)}}function a(f){try{u(n.throw(f))}catch(b){c(b)}}function u(f){f.done?o(f.value):i(f.value).then(s,a)}u((n=n.apply(e,r||[])).next())})}function ye(e,r){var t={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,c;return c={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function s(u){return function(f){return a([u,f])}}function a(u){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,i&&(o=u[0]&2?i.return:u[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,u[1])).done)return o;switch(i=0,o&&(u=[u[0]&2,o.value]),u[0]){case 0:case 1:o=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(o=t.trys,!(o=o.length>0&&o[o.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!o||u[1]>o[0]&&u[1]<o[3])){t.label=u[1];break}if(u[0]===6&&t.label<o[1]){t.label=o[1],o=u;break}if(o&&t.label<o[2]){t.label=o[2],t.ops.push(u);break}o[2]&&t.ops.pop(),t.trys.pop();continue}u=r.call(e,t)}catch(f){u=[6,f],i=0}finally{n=o=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function M(e){var r=typeof Symbol=="function"&&Symbol.iterator,t=r&&e[r],n=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}function E(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),i,o=[],c;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(s){c={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(c)throw c.error}}return o}function C(e,r,t){if(t||arguments.length===2)for(var n=0,i=r.length,o;n<i;n++)(o||!(n in r))&&(o||(o=Array.prototype.slice.call(r,0,n)),o[n]=r[n]);return e.concat(o||Array.prototype.slice.call(r))}function _(e){return this instanceof _?(this.v=e,this):new _(e)}function Le(e,r,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=t.apply(e,r||[]),i,o=[];return i={},c("next"),c("throw"),c("return"),i[Symbol.asyncIterator]=function(){return this},i;function c(h){n[h]&&(i[h]=function(w){return new Promise(function(S,p){o.push([h,w,S,p])>1||s(h,w)})})}function s(h,w){try{a(n[h](w))}catch(S){b(o[0][3],S)}}function a(h){h.value instanceof _?Promise.resolve(h.value.v).then(u,f):b(o[0][2],h)}function u(h){s("next",h)}function f(h){s("throw",h)}function b(h,w){h(w),o.shift(),o.length&&s(o[0][0],o[0][1])}}function ke(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=e[Symbol.asyncIterator],t;return r?r.call(e):(e=typeof M=="function"?M(e):e[Symbol.iterator](),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(o){t[o]=e[o]&&function(c){return new Promise(function(s,a){c=e[o](c),i(s,a,c.done,c.value)})}}function i(o,c,s,a){Promise.resolve(a).then(function(u){o({value:u,done:s})},c)}}function d(e){return typeof e=="function"}function Me(e){var r=function(n){Error.call(n),n.stack=new Error().stack},t=e(r);return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var Q=Me(function(e){return function(t){e(this),this.message=t?t.length+` errors occurred during unsubscription:
`+t.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=t}});function ue(e,r){if(e){var t=e.indexOf(r);0<=t&&e.splice(t,1)}}var me=function(){function e(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var r,t,n,i,o;if(!this.closed){this.closed=!0;var c=this._parentage;if(c)if(this._parentage=null,Array.isArray(c))try{for(var s=M(c),a=s.next();!a.done;a=s.next()){var u=a.value;u.remove(this)}}catch(p){r={error:p}}finally{try{a&&!a.done&&(t=s.return)&&t.call(s)}finally{if(r)throw r.error}}else c.remove(this);var f=this.initialTeardown;if(d(f))try{f()}catch(p){o=p instanceof Q?p.errors:[p]}var b=this._finalizers;if(b){this._finalizers=null;try{for(var h=M(b),w=h.next();!w.done;w=h.next()){var S=w.value;try{ae(S)}catch(p){o=o!=null?o:[],p instanceof Q?o=C(C([],E(o)),E(p.errors)):o.push(p)}}}catch(p){n={error:p}}finally{try{w&&!w.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}if(o)throw new Q(o)}},e.prototype.add=function(r){var t;if(r&&r!==this)if(this.closed)ae(r);else{if(r instanceof e){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(r)}},e.prototype._hasParent=function(r){var t=this._parentage;return t===r||Array.isArray(t)&&t.includes(r)},e.prototype._addParent=function(r){var t=this._parentage;this._parentage=Array.isArray(t)?(t.push(r),t):t?[t,r]:r},e.prototype._removeParent=function(r){var t=this._parentage;t===r?this._parentage=null:Array.isArray(t)&&ue(t,r)},e.prototype.remove=function(r){var t=this._finalizers;t&&ue(t,r),r instanceof e&&r._removeParent(this)},e.EMPTY=function(){var r=new e;return r.closed=!0,r}(),e}();function be(e){return e instanceof me||e&&"closed"in e&&d(e.remove)&&d(e.add)&&d(e.unsubscribe)}function ae(e){d(e)?e():e.unsubscribe()}var R={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},G={setTimeout:function(e,r){for(var t=[],n=2;n<arguments.length;n++)t[n-2]=arguments[n];var i=G.delegate;return i!=null&&i.setTimeout?i.setTimeout.apply(i,C([e,r],E(t))):setTimeout.apply(void 0,C([e,r],E(t)))},clearTimeout:function(e){var r=G.delegate;return((r==null?void 0:r.clearTimeout)||clearTimeout)(e)},delegate:void 0};function we(e){G.setTimeout(function(){var r=R.onUnhandledError;if(r)r(e);else throw e})}function N(){}var Ce=function(){return re("C",void 0,void 0)}();function Re(e){return re("E",void 0,e)}function Ue(e){return re("N",e,void 0)}function re(e,r,t){return{kind:e,value:r,error:t}}var j=null;function De(e){if(R.useDeprecatedSynchronousErrorHandling){var r=!j;if(r&&(j={errorThrown:!1,error:null}),e(),r){var t=j,n=t.errorThrown,i=t.error;if(j=null,n)throw i}}else e()}var ne=function(e){te(r,e);function r(t){var n=e.call(this)||this;return n.isStopped=!1,t?(n.destination=t,be(t)&&t.add(n)):n.destination=He,n}return r.create=function(t,n,i){return new ee(t,n,i)},r.prototype.next=function(t){this.isStopped?$(Ue(t),this):this._next(t)},r.prototype.error=function(t){this.isStopped?$(Re(t),this):(this.isStopped=!0,this._error(t))},r.prototype.complete=function(){this.isStopped?$(Ce,this):(this.isStopped=!0,this._complete())},r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},r.prototype._next=function(t){this.destination.next(t)},r.prototype._error=function(t){try{this.destination.error(t)}finally{this.unsubscribe()}},r.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},r}(me),qe=Function.prototype.bind;function Z(e,r){return qe.call(e,r)}var Fe=function(){function e(r){this.partialObserver=r}return e.prototype.next=function(r){var t=this.partialObserver;if(t.next)try{t.next(r)}catch(n){H(n)}},e.prototype.error=function(r){var t=this.partialObserver;if(t.error)try{t.error(r)}catch(n){H(n)}else H(r)},e.prototype.complete=function(){var r=this.partialObserver;if(r.complete)try{r.complete()}catch(t){H(t)}},e}(),ee=function(e){te(r,e);function r(t,n,i){var o=e.call(this)||this,c;if(d(t)||!t)c={next:t!=null?t:void 0,error:n!=null?n:void 0,complete:i!=null?i:void 0};else{var s;o&&R.useDeprecatedNextContext?(s=Object.create(t),s.unsubscribe=function(){return o.unsubscribe()},c={next:t.next&&Z(t.next,s),error:t.error&&Z(t.error,s),complete:t.complete&&Z(t.complete,s)}):c=t}return o.destination=new Fe(c),o}return r}(ne);function H(e){we(e)}function je(e){throw e}function $(e,r){var t=R.onStoppedNotification;t&&G.setTimeout(function(){return t(e,r)})}var He={closed:!0,next:N,error:je,complete:N},oe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ge(e){return e}function We(e){return e.length===0?ge:e.length===1?e[0]:function(t){return e.reduce(function(n,i){return i(n)},t)}}var Y=function(){function e(r){r&&(this._subscribe=r)}return e.prototype.lift=function(r){var t=new e;return t.source=this,t.operator=r,t},e.prototype.subscribe=function(r,t,n){var i=this,o=Be(r)?r:new ee(r,t,n);return De(function(){var c=i,s=c.operator,a=c.source;o.add(s?s.call(o,a):a?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(r){try{return this._subscribe(r)}catch(t){r.error(t)}},e.prototype.forEach=function(r,t){var n=this;return t=se(t),new t(function(i,o){var c=new ee({next:function(s){try{r(s)}catch(a){o(a),c.unsubscribe()}},error:o,complete:i});n.subscribe(c)})},e.prototype._subscribe=function(r){var t;return(t=this.source)===null||t===void 0?void 0:t.subscribe(r)},e.prototype[oe]=function(){return this},e.prototype.pipe=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return We(r)(this)},e.prototype.toPromise=function(r){var t=this;return r=se(r),new r(function(n,i){var o;t.subscribe(function(c){return o=c},function(c){return i(c)},function(){return n(o)})})},e.create=function(r){return new e(r)},e}();function se(e){var r;return(r=e!=null?e:R.Promise)!==null&&r!==void 0?r:Promise}function Ge(e){return e&&d(e.next)&&d(e.error)&&d(e.complete)}function Be(e){return e&&e instanceof ne||Ge(e)&&be(e)}function ze(e){return d(e==null?void 0:e.lift)}function U(e){return function(r){if(ze(r))return r.lift(function(t){try{return e(t,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function X(e,r,t,n,i){return new Je(e,r,t,n,i)}var Je=function(e){te(r,e);function r(t,n,i,o,c,s){var a=e.call(this,t)||this;return a.onFinalize=c,a.shouldUnsubscribe=s,a._next=n?function(u){try{n(u)}catch(f){t.error(f)}}:e.prototype._next,a._error=o?function(u){try{o(u)}catch(f){t.error(f)}finally{this.unsubscribe()}}:e.prototype._error,a._complete=i?function(){try{i()}catch(u){t.error(u)}finally{this.unsubscribe()}}:e.prototype._complete,a}return r.prototype.unsubscribe=function(){var t;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;e.prototype.unsubscribe.call(this),!n&&((t=this.onFinalize)===null||t===void 0||t.call(this))}},r}(ne),Se=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function Ke(e){return d(e==null?void 0:e.then)}function Qe(e){return d(e[oe])}function Ze(e){return Symbol.asyncIterator&&d(e==null?void 0:e[Symbol.asyncIterator])}function $e(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function Ve(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Ne=Ve();function et(e){return d(e==null?void 0:e[Ne])}function tt(e){return Le(this,arguments,function(){var t,n,i,o;return ye(this,function(c){switch(c.label){case 0:t=e.getReader(),c.label=1;case 1:c.trys.push([1,,9,10]),c.label=2;case 2:return[4,_(t.read())];case 3:return n=c.sent(),i=n.value,o=n.done,o?[4,_(void 0)]:[3,5];case 4:return[2,c.sent()];case 5:return[4,_(i)];case 6:return[4,c.sent()];case 7:return c.sent(),[3,2];case 8:return[3,10];case 9:return t.releaseLock(),[7];case 10:return[2]}})})}function rt(e){return d(e==null?void 0:e.getReader)}function O(e){if(e instanceof Y)return e;if(e!=null){if(Qe(e))return nt(e);if(Se(e))return ot(e);if(Ke(e))return it(e);if(Ze(e))return Ye(e);if(et(e))return ct(e);if(rt(e))return ut(e)}throw $e(e)}function nt(e){return new Y(function(r){var t=e[oe]();if(d(t.subscribe))return t.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ot(e){return new Y(function(r){for(var t=0;t<e.length&&!r.closed;t++)r.next(e[t]);r.complete()})}function it(e){return new Y(function(r){e.then(function(t){r.closed||(r.next(t),r.complete())},function(t){return r.error(t)}).then(null,we)})}function ct(e){return new Y(function(r){var t,n;try{for(var i=M(e),o=i.next();!o.done;o=i.next()){var c=o.value;if(r.next(c),r.closed)return}}catch(s){t={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(t)throw t.error}}r.complete()})}function Ye(e){return new Y(function(r){at(e,r).catch(function(t){return r.error(t)})})}function ut(e){return Ye(tt(e))}function at(e,r){var t,n,i,o;return Pe(this,void 0,void 0,function(){var c,s;return ye(this,function(a){switch(a.label){case 0:a.trys.push([0,5,6,11]),t=ke(e),a.label=1;case 1:return[4,t.next()];case 2:if(n=a.sent(),!!n.done)return[3,4];if(c=n.value,r.next(c),r.closed)return[2];a.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return s=a.sent(),i={error:s},[3,11];case 6:return a.trys.push([6,,9,10]),n&&!n.done&&(o=t.return)?[4,o.call(t)]:[3,8];case 7:a.sent(),a.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return r.complete(),[2]}})})}function st(e,r,t,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var o=r.schedule(function(){t(),i?e.add(this.schedule(null,n)):this.unsubscribe()},n);if(e.add(o),!i)return o}function Te(e,r){return U(function(t,n){var i=0;t.subscribe(X(n,function(o){n.next(e.call(r,o,i++))}))})}var lt=Array.isArray;function ft(e,r){return lt(r)?e.apply(void 0,C([],E(r))):e(r)}function dt(e){return Te(function(r){return ft(e,r)})}function ht(e,r,t,n,i,o,c,s){var a=[],u=0,f=0,b=!1,h=function(){b&&!a.length&&!u&&r.complete()},w=function(p){return u<n?S(p):a.push(p)},S=function(p){o&&r.next(p),u++;var ce=!1;O(t(p,f++)).subscribe(X(r,function(L){i==null||i(L),o?w(L):r.next(L)},function(){ce=!0},void 0,function(){if(ce)try{u--;for(var L=function(){var F=a.shift();c?st(r,c,function(){return S(F)}):S(F)};a.length&&u<n;)L();h()}catch(F){r.error(F)}}))};return e.subscribe(X(r,w,function(){b=!0,h()})),function(){s==null||s()}}function xe(e,r,t){return t===void 0&&(t=1/0),d(r)?xe(function(n,i){return Te(function(o,c){return r(n,o,i,c)})(O(e(n,i)))},t):(typeof r=="number"&&(t=r),U(function(n,i){return ht(n,i,e,t)}))}function pt(e){return new Y(function(r){O(e()).subscribe(r)})}var vt=["addListener","removeListener"],yt=["addEventListener","removeEventListener"],mt=["on","off"];function y(e,r,t,n){if(d(t)&&(n=t,t=void 0),n)return y(e,r,t).pipe(dt(n));var i=E(gt(e)?yt.map(function(s){return function(a){return e[s](r,a,t)}}):bt(e)?vt.map(le(e,r)):wt(e)?mt.map(le(e,r)):[],2),o=i[0],c=i[1];if(!o&&Se(e))return xe(function(s){return y(s,r,t)})(O(e));if(!o)throw new TypeError("Invalid event target");return new Y(function(s){var a=function(){for(var u=[],f=0;f<arguments.length;f++)u[f]=arguments[f];return s.next(1<u.length?u:u[0])};return o(a),function(){return c(a)}})}function le(e,r){return function(t){return function(n){return e[t](r,n)}}}function bt(e){return d(e.addListener)&&d(e.removeListener)}function wt(e){return d(e.on)&&d(e.off)}function gt(e){return d(e.addEventListener)&&d(e.removeEventListener)}function St(e,r,t){return pt(function(){return e()?r:t})}function Xe(e,r){return U(function(t,n){var i=null,o=0,c=!1,s=function(){return c&&!i&&n.complete()};t.subscribe(X(n,function(a){i==null||i.unsubscribe();var u=0,f=o++;O(e(a,f)).subscribe(i=X(n,function(b){return n.next(r?r(a,b,f,u++):b)},function(){i=null,s()}))},function(){c=!0,s()}))})}function B(e){return U(function(r,t){O(e).subscribe(X(t,function(){return t.complete()},N)),!t.closed&&r.subscribe(t)})}function g(e,r,t){var n=d(e)||r||t?{next:e,error:r,complete:t}:e;return n?U(function(i,o){var c;(c=n.subscribe)===null||c===void 0||c.call(n);var s=!0;i.subscribe(X(o,function(a){var u;(u=n.next)===null||u===void 0||u.call(n,a),o.next(a)},function(){var a;s=!1,(a=n.complete)===null||a===void 0||a.call(n),o.complete()},function(a){var u;s=!1,(u=n.error)===null||u===void 0||u.call(n,a),o.error(a)},function(){var a,u;s&&((a=n.unsubscribe)===null||a===void 0||a.call(n)),(u=n.finalize)===null||u===void 0||u.call(n)}))}):ge}CanvasRenderingContext2D.prototype.roundRect=function(e,r,t,n,i){return this.beginPath(),this.moveTo(e+i,r),this.arcTo(e+t,r,e+t,r+n,i),this.arcTo(e+t,r+n,e,r+n,i),this.arcTo(e,r+n,e,r,i),this.arcTo(e,r,e+t,r,i),this.fill(),this};var v=document.querySelector("canvas"),W=v.getContext("2d");v.width=window.innerWidth*.7;v.height=window.innerHeight;const z=document.querySelector(".control__reset"),fe=document.querySelector(".control__up"),de=document.querySelector(".control__down");let m=1,ie=1,D=0,q=0,J=0,P=0,l={screenX:0,screenY:0,realX:0,realY:0};const x=new Image;x.src=Oe;x.onload=function(){m=v.width/x.naturalWidth,ie=m,T()};function K(e,r){l.bounds=v.getBoundingClientRect(),l.screenX=e-l.bounds.left,l.screenY=r-l.bounds.top}function _e(e,r){const t=l.realX,n=l.realY;K(e,r),l.realX=I(l.screenX),l.realY=A(l.screenY);const i=l.realX-t,o=l.realY-n;D-=i,q-=o,l.realX=I(l.screenX),l.realY=A(l.screenY),T()}function Ee(e,r){K(e,r),l.realX=I(l.screenX),l.realY=A(l.screenY),D=l.realX,q=l.realY,J=l.screenX,P=l.screenY,l.realX=I(l.screenX),l.realY=A(l.screenY)}y(v,"mousedown").pipe(g(e=>{K(e.clientX,e.clientY),l.realX=I(l.screenX),l.realY=A(l.screenY)}),Xe(()=>y(v,"mousemove").pipe(g(e=>_e(e.clientX,e.clientY)),B(y(v,"mouseout")),B(y(v,"mouseup"))))).subscribe();y(v,"wheel",{passive:!1}).pipe(g(e=>{e.preventDefault(),e.deltaY<0?m=Math.min(5,m*1.1):m=Math.max(.1,m*(1/1.1)),Ee(e.clientX,e.clientY),T()})).subscribe();let he=0;y(v,"touchstart").pipe(g(e=>{K(e.touches[0].clientX,e.touches[0].clientY),l.realX=I(l.screenX),l.realY=A(l.screenY)}),Xe(e=>{e.touches.length===2&&(he=Math.hypot(e.touches[0].clientX-e.touches[1].clientX,e.touches[0].clientY-e.touches[1].clientY));const r=m;return St(()=>e.touches.length===2,y(v,"touchmove",{passive:!1}).pipe(g(t=>{const n=Math.hypot(t.touches[0].clientX-t.touches[1].clientX,t.touches[0].clientY-t.touches[1].clientY);m=r*(n/he);const i=(t.touches[0].clientX+t.touches[1].clientX)/2,o=(t.touches[0].clientY+t.touches[1].clientY)/2;Ee(i,o),T()})),y(v,"touchmove").pipe(g(t=>_e(t.touches[0].clientX,t.touches[0].clientY)))).pipe(B(y(v,"touchend")),B(y(v,"touchcancel")))})).subscribe(()=>{},()=>{},()=>{alert("complete")});function k(e){return Math.floor(e*m)}function pe(e){return Math.floor((e-D)*m+J)}function ve(e){return Math.floor((e-q)*m+P)}function I(e){return Math.floor((e-J)*(1/m)+D)}function A(e){return Math.floor((e-P)*(1/m)+q)}function T(){z&&z.classList.toggle("control__reset--show",m!==ie),W.clearRect(0,0,v.width,v.height),W.drawImage(x,pe(0),ve(0),k(x.naturalWidth),k(x.naturalHeight)),W.fillStyle="lineargradiant(0, 0, blue, red)",W.roundRect(pe(194),ve(350),k(100),k(100),k(10))}y(window,"resize").pipe(g(()=>{v.width=window.innerWidth,m=v.width/x.naturalWidth,Ie(),T()})).subscribe();function Yt(){m=ie}function Ie(){D=0,q=0,J=0,P=0,l={screenX:0,screenY:0,realX:0,realY:0}}z&&y(z,"click").pipe(g(()=>{Yt(),Ie(),T()})).subscribe();de&&y(de,"click").pipe(g(()=>{P-=200,T()})).subscribe();fe&&y(fe,"click").pipe(g(()=>{P+=200,T()})).subscribe();
